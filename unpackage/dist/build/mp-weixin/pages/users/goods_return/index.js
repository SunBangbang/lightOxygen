(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/goods_return/index"],{2337:function(n,t,e){"use strict";var r=e("5e17"),u=e.n(r);u.a},4934:function(n,t,e){"use strict";var r;e.d(t,"b",(function(){return u})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return r}));var u=function(){var n=this,t=n.$createElement;n._self._c},i=[]},"5e17":function(n,t,e){},"6ce7":function(n,t,e){"use strict";e.r(t);var r=e("4934"),u=e("8862");for(var i in u)"default"!==i&&function(n){e.d(t,n,(function(){return u[n]}))}(i);e("2337");var a,o=e("f0c5"),d=Object(o["a"])(u["default"],r["b"],r["c"],!1,null,"1b0c93ac",null,!1,r["a"],a);t["default"]=d.exports},8862:function(n,t,e){"use strict";e.r(t);var r=e("a2fe"),u=e.n(r);for(var i in r)"default"!==i&&function(n){e.d(t,n,(function(){return r[n]}))}(i);t["default"]=u.a},a2fe:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e("cf5b"),u=e("0ddd"),i=e("26cb"),a=o(e("8c9a"));function o(n){return n&&n.__esModule?n:{default:n}}var d=function(){e.e("components/Authorize").then(function(){return resolve(e("5c82"))}.bind(null,e)).catch(e.oe)},s={components:{authorize:d},mixins:[a.default],data:function(){return{id:0,cartIds:[],refund_reason_wap_img:[],status:{},RefundArray:[],refundCartInfo:[],returnGoodsData:["仅退款","退货并退款"],refund_total_num:0,index:0,returnGoods:0,orderId:0,refundNumData:[],refund_num_index:0}},computed:(0,i.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(n,t){n&&(this.refundGoodsInfo(),this.getRefundReason())},deep:!0}},onLoad:function(n){this.orderId=n.orderId,this.id=n.id,n.cartIds&&(this.cartIds=JSON.parse(n.cartIds)||[]),this.isLogin?(this.refundGoodsInfo(),this.getRefundReason()):(0,u.toLogin)()},methods:{refundGoodsInfo:function(){var n=this;(0,r.postRefundGoods)({id:this.id,cart_ids:this.cartIds}).then((function(t){var e=t.data;n.status=e._status,n.refundCartInfo=e.cartInfo,n.refundCartInfo.forEach((function(t){n.refund_total_num=n.$util.$h.Add(n.refund_total_num,t.cart_num)})),n.refundNumData=Array(n.refund_total_num).fill(0).map((function(n,t){return t+1})),1===n.refundCartInfo.length&&(n.refund_num_index=n.refundNumData.length-1)})).catch((function(t){return n.$util.Tips({title:t})}))},getRefundReason:function(){var n=this;(0,r.ordeRefundReason)().then((function(t){n.$set(n,"RefundArray",t.data)}))},DelPic:function(n){var t=n,e=this;this.refund_reason_wap_img[t];e.refund_reason_wap_img.splice(t,1),e.$set(e,"refund_reason_wap_img",e.refund_reason_wap_img)},uploadpic:function(){var n=this;this.$util.uploadImageOne("upload/image",(function(t){n.refund_reason_wap_img.push(t.data.url),n.$set(n,"refund_reason_wap_img",n.refund_reason_wap_img)}))},subRefund:function(n){var t=this,e=this,u=n.detail.value;if(!u.refund_reason_wap_explain)return this.$util.Tips({title:"请输入备注说明"});var i=this.refundCartInfo;1===i.length&&(this.cartIds=[{cart_id:i[0].id,cart_num:this.refund_num_index+1}]),(0,r.returnGoodsSubmit)(this.id,{text:e.RefundArray[e.index]||"",refund_reason_wap_explain:u.refund_reason_wap_explain,refund_reason_wap_img:e.refund_reason_wap_img.join(","),refund_type:this.returnGoods?2:1,uni:e.orderId,cart_ids:this.cartIds}).then((function(n){return t.$util.Tips({title:"申请成功",icon:"success"},{tab:5,url:"/pages/users/user_return_list/index?isT=1"})})).catch((function(n){return t.$util.Tips({title:n})}))},bindPickerChange:function(n){this.$set(this,"index",n.detail.value)},returnGoodsChange:function(n){this.$set(this,"returnGoods",n.detail.value)},returnGoodsNum:function(n){this.$set(this,"refund_num_index",Number(n.detail.value))}}};t.default=s},b1f5:function(n,t,e){"use strict";(function(n){e("8244");r(e("66fd"));var t=r(e("6ce7"));function r(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=e,n(t.default)}).call(this,e("543d")["createPage"])}},[["b1f5","common/runtime","common/vendor"]]]);